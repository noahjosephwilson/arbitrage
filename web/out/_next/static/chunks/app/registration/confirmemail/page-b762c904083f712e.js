(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8955],{5527:(e,n,i)=>{Promise.resolve().then(i.bind(i,9109))},5633:e=>{e.exports={pageContainer:"ConfirmEmail_pageContainer__T4A0W",card:"ConfirmEmail_card__5QYHA",backButton:"ConfirmEmail_backButton__6EhkJ",header:"ConfirmEmail_header__ZqV6x",logo:"ConfirmEmail_logo__tTAbL",title:"ConfirmEmail_title__voEdB",loginForm:"ConfirmEmail_loginForm__Lh9me",formGroup:"ConfirmEmail_formGroup__q12v2",label:"ConfirmEmail_label__dyPhz",inputField:"ConfirmEmail_inputField__5S7Zm",submitBtn:"ConfirmEmail_submitBtn__Lm9PI",errorMsg:"ConfirmEmail_errorMsg__rRECo",successMsg:"ConfirmEmail_successMsg__InBLt",noAccount:"ConfirmEmail_noAccount__l6SP5",resendLink:"ConfirmEmail_resendLink__c_IXS",signOutButton:"ConfirmEmail_signOutButton__rLXE_"}},9109:(e,n,i)=>{"use strict";i.d(n,{default:()=>U});var t=i(5155),a=i(2115),s=i(7648),o=i(8785),r=i(6199),l=i(9414),m=i(7314),c=i(8452),d=i(9492),u=i(2684),g=i(6904),_=i(2954),C=i(5720),p=i(6271),f=i(3540),h=i(6869);let E=e=>(0,_.A)(p.e,(0,f._)("ConfirmSignUp"),(0,h.T)(),{...C.C,...e});var S=i(12),v=i(9173),x=i(4229);async function b(e){let{username:n,confirmationCode:i,options:t}=e,a=s.H.getConfig().Auth?.Cognito;(0,o.$y)(a);let{userPoolId:_,userPoolClientId:C,userPoolEndpoint:p}=a,f=t?.clientMetadata;(0,m.M)(!!n,c.P.EmptyConfirmSignUpUsername),(0,m.M)(!!i,c.P.EmptyConfirmSignUpCode);let h=(0,g.d)({username:n,userPoolId:_,userPoolClientId:C}),b=E({endpointResolver:(0,S.o)({endpointOverride:p})}),{Session:N}=await b({region:(0,d.J)(a.userPoolId),userAgentValue:(0,u.A)(r.BM.ConfirmSignUp)},{Username:n,ConfirmationCode:i,ClientMetadata:f,ForceAliasCreation:t?.forceAliasCreation,ClientId:a.userPoolClientId,UserContextData:h});return new Promise((e,i)=>{try{let i={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},t=v.z.getState();if(!t.active||t.username!==n){e(i),(0,x.xO)();return}v.z.dispatch({type:"SET_SESSION",value:N});let a=l.f3.listen("auth-internal",({payload:n})=>{"autoSignIn"===n.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),a())});l.f3.dispatch("auth-internal",{event:"confirmSignUp",data:i})}catch(e){i(e)}})}var N=i(7016);let y=e=>(0,_.A)(p.e,(0,f._)("ResendConfirmationCode"),(0,h.T)(),{...C.C,...e});async function P(e){let{username:n}=e;(0,m.M)(!!n,c.P.EmptySignUpUsername);let i=s.H.getConfig().Auth?.Cognito;(0,o.$y)(i);let{userPoolClientId:t,userPoolId:a,userPoolEndpoint:l}=i,_=e.options?.clientMetadata,C=(0,g.d)({username:n,userPoolId:a,userPoolClientId:t}),p=y({endpointResolver:(0,S.o)({endpointOverride:l})}),{CodeDeliveryDetails:f}=await p({region:(0,d.J)(i.userPoolId),userAgentValue:(0,u.A)(r.BM.ResendSignUpCode)},{Username:n,ClientMetadata:_,ClientId:i.userPoolClientId,UserContextData:C}),{DeliveryMedium:h,AttributeName:E,Destination:v}={...f};return{destination:v,deliveryMedium:h,attributeName:E||void 0}}var j=i(2082),A=i(5695),I=i(5633),M=i.n(I);let U=()=>{let e=(0,A.useRouter)(),n=(0,A.useSearchParams)(),[i,s]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[l,m]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,g]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=sessionStorage.getItem("signupEmail"),i=sessionStorage.getItem("signupPassword"),t=n.get("email");(e||t)&&s(e||t),i&&r(i)},[n]);let _=async n=>{if(n.preventDefault(),d(""),g(""),!i)return void d("Email is missing. Please return to the signup page.");try{await b({username:i,confirmationCode:l}),await (0,N.J)({username:i,password:o}),sessionStorage.removeItem("signupPassword"),g("✅ Email confirmed and signed in! Redirecting..."),setTimeout(()=>e.push("/main/logo"),2e3)}catch(e){console.error("❌ Error confirming email or signing in:",e),d(e.message||"Failed to confirm email.")}},C=async()=>{if(d(""),g(""),!i)return void d("Email is missing. Please return to the signup page.");try{await P({username:i}),g("\uD83D\uDD01 Confirmation code resent. Check your inbox.")}catch(e){d(e.message||"Failed to resend code.")}},p=async()=>{try{await (0,j.C)({global:!0}),e.push("/landing")}catch(e){d("Failed to sign out. Please try again.")}};return(0,t.jsx)("div",{className:M().pageContainer,children:(0,t.jsxs)("div",{className:M().card,children:[(0,t.jsx)("button",{className:M().signOutButton,onClick:p,children:"← Back"}),(0,t.jsx)("header",{className:M().header,children:(0,t.jsx)("h1",{className:M().logo,children:"Arbitrage"})}),(0,t.jsx)("h2",{className:M().title,children:"Confirm Your Email"}),i&&(0,t.jsxs)("p",{className:M().instruction,children:["We just sent a confirmation code to ",(0,t.jsx)("strong",{children:i}),".",(0,t.jsx)("br",{}),"Please enter the code below to activate your account."]}),(0,t.jsxs)("form",{className:M().loginForm,onSubmit:_,children:[(0,t.jsxs)("div",{className:M().formGroup,children:[(0,t.jsx)("label",{htmlFor:"code",className:M().label,children:"Confirmation Code"}),(0,t.jsx)("input",{type:"text",id:"code",className:M().inputField,placeholder:"Enter 6-digit code",value:l,onChange:e=>m(e.target.value),required:!0})]}),c&&(0,t.jsxs)("p",{className:M().errorMsg,children:["❌ ",c]}),u&&(0,t.jsx)("p",{className:M().successMsg,children:u}),(0,t.jsx)("button",{type:"submit",className:M().submitBtn,children:"Confirm and Sign In"})]}),(0,t.jsxs)("p",{className:M().noAccount,children:["Didn’t get the code?"," ",(0,t.jsx)("button",{className:M().resendLink,onClick:C,children:"Resend Code"})]})]})})}}},e=>{var n=n=>e(e.s=n);e.O(0,[9866,3320,4572,6153,8441,1684,7358],()=>n(5527)),_N_E=e.O()}]);