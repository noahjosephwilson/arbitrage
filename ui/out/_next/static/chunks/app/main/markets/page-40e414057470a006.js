(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3868],{522:e=>{e.exports={section:"CardStack_section__E35Ui",sectionContent:"CardStack_sectionContent__bFyHT",itemsGrid:"CardStack_itemsGrid__K1ZQ5",sentinel:"CardStack_sentinel__395RX",debugSection:"CardStack_debugSection__MJp9_",error:"CardStack_error__IOUqU"}},2372:(e,a,t)=>{Promise.resolve().then(t.bind(t,7367))},2844:e=>{e.exports={container:"MarketsPage_container__BoC1I"}},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"redirect")&&t.d(a,{redirect:function(){return r.redirect}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},5970:e=>{e.exports={secondaryCategories:"SecondaryCategories_secondaryCategories__5IkQg",secondaryCategoriesContent:"SecondaryCategories_secondaryCategoriesContent__COwtS",subcategoryList:"SecondaryCategories_subcategoryList__m3MPD",subcategoryItem:"SecondaryCategories_subcategoryItem__1N159",activeSubcategory:"SecondaryCategories_activeSubcategory__wDq1y"}},7367:(e,a,t)=>{"use strict";t.d(a,{default:()=>j});var r=t(5155),s=t(2115),n=t(9882),o=t.n(n);let c=e=>{let{categories:a=[],activeCategory:t,onCategoryChange:s}=e;return(0,r.jsx)("div",{className:o().primaryCategories,children:(0,r.jsxs)("div",{className:o().primaryCategoriesContent,children:[(0,r.jsx)("div",{className:o().topRow,children:a.map((e,a)=>(0,r.jsx)("button",{className:"".concat(o().topRowItem," ").concat(t&&t["Primary ID"]===e["Primary ID"]?o().activeCategory:""),onClick:()=>s(e),children:e["Primary Name"]},e["Primary ID"]||e["Primary Name"]||a))}),(0,r.jsx)("div",{className:o().fullWidthLine})]})})};var i=t(5970),l=t.n(i);let d=e=>{let{subcategories:a=[],activeSubcategory:t,onSubcategoryChange:s,animate:n}=e;return(0,r.jsx)("div",{className:l().secondaryCategories,children:(0,r.jsx)("div",{className:l().secondaryCategoriesContent,children:(0,r.jsx)("div",{className:l().subcategoryList,children:a.map((e,a)=>(0,r.jsx)("button",{className:"".concat(l().subcategoryItem," ").concat(t&&t["Secondary ID"]===e["Secondary ID"]?"".concat(l().activeSubcategory," ").concat(n?l().animate:""):""),onClick:()=>s(e),children:e["Secondary Name"]},e["Secondary ID"]||e["Secondary Name"]||a))})})})};var m=t(5695),u=t(9926),_=t.n(u);let h=function(e){let{imageSrc:a,title:t,totalAmount:n,items:o=[],percentage:c,yesInfo:i,noInfo:l}=e,d=(0,m.useRouter)(),[u,h]=(0,s.useState)(!1),g=void 0!==i&&void 0!==l,p=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e.split("→")[0].trim();if(0===a)return(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:_().startMoney,children:s}),(0,r.jsx)("span",{className:_().arrow,children:"→"}),(0,r.jsx)("span",{className:_().endMoney,children:"--"})]});let n=t?1-a/100:a/100;if(0===n)return(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:_().startMoney,children:s}),(0,r.jsx)("span",{className:_().arrow,children:"→"}),(0,r.jsx)("span",{className:_().endMoney,children:"--"})]});let o=Math.floor(1/n*100),c=s.match(/^[^\d]*/),i=(c?c[0]:"")+o.toLocaleString();return(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:_().startMoney,children:s}),(0,r.jsx)("span",{className:_().arrow,children:"→"}),(0,r.jsx)("span",{className:_().endMoney,children:i})]})};return(0,r.jsx)("div",{className:_().cardWrapper,children:(0,r.jsxs)("div",{className:_().card,onClick:()=>d.push("/main/trade"),children:[(0,r.jsxs)("div",{className:_().cardHeader,children:[(0,r.jsxs)("div",{className:_().headerLeft,children:[a?(0,r.jsx)("img",{src:a,alt:t,className:_().cardImage,onError:e=>{e.currentTarget.src="https://via.placeholder.com/60"}}):(0,r.jsx)("div",{className:_().imagePlaceholder}),(0,r.jsx)("h2",{className:_().cardTitle,children:t})]}),g&&void 0!==c&&(0,r.jsx)("div",{className:_().cardPercentage,children:0===c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:_().percentageNumber,children:"-"}),(0,r.jsx)("span",{className:_().percentSign,children:"%"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:_().percentageNumber,children:c}),(0,r.jsx)("span",{className:_().percentSign,children:"%"})]})})]}),(0,r.jsx)("div",{className:_().cardBody,children:g?(0,r.jsxs)("div",{className:_().optionsRow,children:[(0,r.jsxs)("div",{className:_().optionColumn,children:[(0,r.jsx)("button",{className:"".concat(_().optionButton," ").concat(_().yesButton),onClick:e=>{e.stopPropagation(),d.push("/main/trade")},children:"Yes"}),(0,r.jsx)("div",{className:_().optionValue,children:p(i,c,!1)})]}),(0,r.jsxs)("div",{className:_().optionColumn,children:[(0,r.jsx)("button",{className:"".concat(_().optionButton," ").concat(_().noButton),onClick:e=>{e.stopPropagation(),d.push("/main/trade")},children:"No"}),(0,r.jsx)("div",{className:_().optionValue,children:p(l,c,!0)})]})]}):o.slice(0,2).map((e,a)=>(0,r.jsxs)("div",{className:_().itemRow,children:[(0,r.jsxs)("div",{className:"".concat(_().itemName," ").concat(1===a&&o.length>2?_().withMore:""),children:[e.name,1===a&&o.length>2&&(0,r.jsx)("span",{className:_().moreText,children:"more"})]}),(0,r.jsxs)("div",{className:_().itemPercentage,children:[(0,r.jsx)("span",{className:_().percentageNumber,children:e.percentage}),(0,r.jsx)("span",{className:_().percentSign,children:"%"})]}),(0,r.jsxs)("div",{className:_().votingButtons,children:[(0,r.jsx)("button",{className:_().multiyesButton,onClick:e=>{e.stopPropagation(),d.push("/main/trade")},children:"Yes"}),(0,r.jsx)("button",{className:_().multinoButton,onClick:e=>{e.stopPropagation(),d.push("/main/trade")},children:"No"})]})]},a))}),(0,r.jsxs)("div",{className:_().cardFooter,children:[(0,r.jsxs)("span",{className:_().totalAmount,children:["$",Math.floor(Number(n)).toLocaleString()]}),(0,r.jsx)("div",{className:_().iconCircle,onClick:e=>{e.stopPropagation(),h(e=>!e)},children:(0,r.jsx)("div",{className:u?_().checkIcon:_().plusIcon})})]})]})})};var g=t(522),p=t.n(g);let C=e=>{var a,t,r,s,n;let o=null!=(a=e.options[0])?a:{},c=Math.round((null!=(t=o.choice1Value)?t:0)*100),i=Math.round((null!=(r=o.choice2Value)?r:0)*100);return{marketID:e.marketID,imageSrc:e.imageUrl||"https://via.placeholder.com/50",title:e.name,totalAmount:e.volume,items:[{name:null!=(s=o.choice1)?s:"Yes",percentage:c},{name:null!=(n=o.choice2)?n:"No",percentage:i}],percentage:c,yesInfo:"$100 → $".concat((2.78*c).toFixed(2)),noInfo:"$100 → $".concat((1.45*i).toFixed(2))}};function y(e){let{activePrimary:a,secondaryCategoryOptions:t=[],activeSubcategory:n,onSubcategoryChange:o}=e,[c,i]=(0,s.useState)([]),[l,d]=(0,s.useState)([]),[m,u]=(0,s.useState)(null),[_,g]=(0,s.useState)([]),[y,x]=(0,s.useState)(12),N=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!(null==a?void 0:a["Primary ID"])||!(null==n?void 0:n["Secondary ID"]))return;let e="".concat("https://z5uhj1qanf.execute-api.us-east-1.amazonaws.com/dev/readmarketids","?primaryID=").concat(encodeURIComponent(a["Primary ID"]),"&secondaryID=").concat(encodeURIComponent(n["Secondary ID"]));u(null),fetch(e).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(e=>{let{marketIDs:a=[]}=e;i(a),d(a.map(e=>({marketID:e,title:"Loading…",imageSrc:"https://via.placeholder.com/50",totalAmount:0,items:[]})))}).catch(e=>{u(e.message),i([]),d([])}).finally(()=>{x(12)})},[a,n]),(0,s.useEffect)(()=>{c.length&&fetch("https://d9pdiud471.execute-api.us-east-1.amazonaws.com/dev/marketcarddetails",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:{marketIDs:c}})}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(e=>{let{markets:a=[]}=e;d(a.map(C))}).catch(e=>{u(e.message)})},[c]),(0,s.useEffect)(()=>{g(l.slice(0,y))},[l,y]),(0,s.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&y<l.length&&x(e=>e+12)});return N.current&&e.observe(N.current),()=>{N.current&&e.unobserve(N.current)}},[y,l]),(0,r.jsx)("section",{className:p().section,children:(0,r.jsxs)("div",{className:p().sectionContent,children:[m&&(0,r.jsxs)("p",{className:p().error,children:["Error: ",m]}),(0,r.jsx)("div",{className:p().itemsGrid,children:_.map(e=>(0,r.jsx)(h,{...e},e.marketID))}),(0,r.jsx)("div",{ref:N,className:p().sentinel})]})})}var x=t(2844),N=t.n(x);let j=function(){let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)(!0),[o,i]=(0,s.useState)(null),[l,m]=(0,s.useState)(null),[u,_]=(0,s.useState)(null);(0,s.useEffect)(()=>{fetch("https://lxqyajwdrd.execute-api.us-east-1.amazonaws.com/dev/readcategories").then(e=>{if(!e.ok)throw Error("Categories API error: ".concat(e.status));return e.json()}).then(e=>{let t=e["Primary Categories"]||[];if(a(t),t.length>0){let e=t.find(e=>"All"===e["Primary Name"])||t[0];m(e),e["Secondary Categories"]&&e["Secondary Categories"].length>0&&_(e["Secondary Categories"][0])}}).catch(e=>{console.error("Error fetching categories:",e),i(e.message)}).finally(()=>{n(!1)})},[]);let h=e=>{console.log("Secondary category changed to:",e),_(e)};if(t)return(0,r.jsx)("div",{className:N().container,children:(0,r.jsx)("p",{children:"Loading categories..."})});if(o)return(0,r.jsx)("div",{className:N().container,children:(0,r.jsxs)("p",{children:["Error: ",o]})});let g=l&&l["Secondary Categories"]?l["Secondary Categories"]:[];return(0,r.jsxs)("div",{className:N().container,children:[(0,r.jsx)(c,{categories:e,activeCategory:l,onCategoryChange:e=>{console.log("Primary category changed to:",e),m(e),e["Secondary Categories"]&&e["Secondary Categories"].length>0?_(e["Secondary Categories"][0]):_(null)}}),(0,r.jsx)(d,{subcategories:g,activeSubcategory:u,onSubcategoryChange:h}),(0,r.jsx)(y,{activePrimary:l,secondaryCategoryOptions:g,activeSubcategory:u,onSubcategoryChange:h})]})}},9882:e=>{e.exports={primaryCategories:"PrimaryCategories_primaryCategories__6vG4O",primaryCategoriesContent:"PrimaryCategories_primaryCategoriesContent__Nz12s",topRow:"PrimaryCategories_topRow__yM6ET",topRowItem:"PrimaryCategories_topRowItem__Tipih",activeCategory:"PrimaryCategories_activeCategory__z49TX",fullWidthLine:"PrimaryCategories_fullWidthLine__LhRNL",bottomRow:"PrimaryCategories_bottomRow__Y2vhg",subcategoryList:"PrimaryCategories_subcategoryList__B5a0U",subcategoryItem:"PrimaryCategories_subcategoryItem__5RmmK",activeSubcategory:"PrimaryCategories_activeSubcategory__Tm_jI"}},9926:e=>{e.exports={cardWrapper:"Card_cardWrapper__4miJN",card:"Card_card__j712R",cardHeader:"Card_cardHeader__4LmRZ",headerLeft:"Card_headerLeft__nUv2I",cardImage:"Card_cardImage__nRaym",cardTitle:"Card_cardTitle__ICOCa",cardPercentage:"Card_cardPercentage__KRfQ1",percentageNumber:"Card_percentageNumber__qPSZc",percentSign:"Card_percentSign__ff_zg",cardBody:"Card_cardBody__n98Xx",optionsRow:"Card_optionsRow__F22Dl",optionColumn:"Card_optionColumn__IwR4S",optionButton:"Card_optionButton__TVeGm",multiyesButton:"Card_multiyesButton__ZTMxN",multinoButton:"Card_multinoButton__W6QsT",yesButton:"Card_yesButton__9TxPI",noButton:"Card_noButton__GVibt",optionValue:"Card_optionValue__oEbcQ",startMoney:"Card_startMoney___qG20",arrow:"Card_arrow__CRrBT",endMoney:"Card_endMoney__u9I8I",itemsGrid:"Card_itemsGrid__Wuba1",itemName:"Card_itemName__ulFOg",withMore:"Card_withMore__9251t",moreText:"Card_moreText__VDkYj",itemPercentage:"Card_itemPercentage__o37yb",votingButtons:"Card_votingButtons__Cki1w",cardFooter:"Card_cardFooter__oxLCC",totalAmount:"Card_totalAmount__uvy6_",iconCircle:"Card_iconCircle__2oC2x",plusIcon:"Card_plusIcon__GIHS0",checkIcon:"Card_checkIcon__3lzr5"}}},e=>{var a=a=>e(e.s=a);e.O(0,[2059,8441,1684,7358],()=>a(2372)),_N_E=e.O()}]);